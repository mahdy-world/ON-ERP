<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}ONERP{% endblock %}</title>
    {% load staticfiles %}
    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="{% static 'AdminLTE/plugins/fontawesome-free/css/all.min.css' %}">
    <!-- Ionicons -->
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <!-- Tempusdominus Bootstrap 4 -->
    <link rel="stylesheet"
        href="{% static 'AdminLTE/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css' %}">
    <link rel="stylesheet" href="https://cdn.rtlcss.com/bootstrap/v4.2.1/css/bootstrap.min.css"
        integrity="sha384-vus3nQHTD+5mpDiZ4rkEPlnkcyTP+49BhJ4wJeJunw06ZAp+wzzeBPUXr42fi8If" crossorigin="anonymous">
    <!-- iCheck -->
    <link rel="stylesheet" href="{% static 'AdminLTE/plugins/icheck-bootstrap/icheck-bootstrap.min.css' %}">
    
    <!-- JQVMap -->
    <link rel="stylesheet" href="{% static 'AdminLTE/plugins/jqvmap/jqvmap.min.css' %}">
    <!-- Theme style -->
    <link rel="stylesheet" href="{% static 'AdminLTE/dist/css/adminlte.min.css' %}">
    <link rel="stylesheet" href="{% static 'AdminLTE/plugins/select2/css/select2.min.css' %}">
    <link rel="stylesheet" href="{% static 'AdminLTE/dist/css/adminlte-rtl.css' %}">
    <!-- overlayScrollbars -->
    <link rel="stylesheet" href="{% static 'AdminLTE/plugins/overlayScrollbars/css/OverlayScrollbars.min.css' %}">
    <!-- Daterange picker -->
    <link rel="stylesheet" href="{% static 'AdminLTE/plugins/daterangepicker/daterangepicker.css' %}">
    <!-- summernote -->
    <link rel="stylesheet" href="{% static 'AdminLTE/plugins/summernote/summernote-bs4.min.css' %}">
    <!-- Cairo Font -->
    <link href='https://fonts.googleapis.com/css?family=Cairo' rel='stylesheet'>
    <style>
        body {
            font-family: Cairo;
        }

        @media print {
            .dont-print {
                display: none;
            }

            .print-only {
                display: inherit;
            }
        }
    </style>
    <style>
        /* Chart.js */
@keyframes chartjs-render-animation{from{opacity:.99}to{opacity:1}}.chartjs-render-monitor{animation:chartjs-render-animation 1ms}.chartjs-size-monitor,.chartjs-size-monitor-expand,.chartjs-size-monitor-shrink{position:absolute;direction:ltr;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1}.chartjs-size-monitor-expand>div{position:absolute;width:1000000px;height:1000000px;left:0;top:0}.chartjs-size-monitor-shrink>div{position:absolute;width:200%;height:200%;left:0;top:0}
    </style>
    {% block css %}

    {% endblock %}
</head>

<body class="hold-transition sidebar-mini layout-fixed text-sm">
    <div class="wrapper">



        {% block modal %}
        <div class="modal fade" id="action_modal">
            <div class="modal-dialog">
                <div class="modal-content" id="action_body">
                    <span class="float-left">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </span>

                </div>
            </div>
        </div>

        <div class="modal fade" id="sub_modal">
            <div class="modal-dialog">
                <div class="modal-content" id="sub_body">
                    <span class="float-left">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </span>

                </div>
            </div>
        </div>
        {% endblock %}
        <!-- Navbar -->
        <nav class="main-header navbar navbar-expand navbar-navy navbar-dark">
        {% block top_navbar %}
            <!-- Left navbar links -->
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
                </li>
                <li class="nav-item d-none d-sm-inline-block {% if request.path == index_url %} active{% endif %}">
                    <a href="{% url 'Core:index' %}" class="nav-link">الرئيسية</a>
                </li>


                <li class="nav-item d-none d-sm-inline-block {% if request.path == index_url %} active{% endif %}">

                </li>
                <li class="nav-item d-none d-sm-inline-block">
                    <a href="#" class="nav-link">اتصل بنا</a>
                </li>

                

            </ul>
            {% endblock %}

            <!-- SEARCH FORM -->
            <form class="form-inline ml-3" method="get" action="{% url 'Invoices:search_invoice' %}">
                <div class="input-group input-group-sm">
                    <input class="form-control form-control-navbar" placeholder="بحث عن فاتورة ..." name="invoice_id"
                        type="text">
                    <div class="input-group-append">
                        <button class="btn btn-navbar" type="submit">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>
            </form>

            <!-- Right navbar links -->
            {% block right_navbar %}
                <ul class="navbar-nav ml-auto">

                    <!-- Notifications Dropdown Menu -->
                    <!--
                    <li class="nav-item dropdown">
                        <a class="nav-link" data-toggle="dropdown" href="#">
                            <i class="far fa-bell"></i>
                            <span class="badge badge-warning navbar-badge">15</span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                            <span class="dropdown-item dropdown-header">15 Notifications</span>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item">
                                <i class="fas fa-envelope mr-2"></i> 4 new messages
                                <span class="float-right text-muted text-sm">3 mins</span>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item">
                                <i class="fas fa-users mr-2"></i> 8 friend requests
                                <span class="float-right text-muted text-sm">12 hours</span>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item">
                                <i class="fas fa-file mr-2"></i> 3 new reports
                                <span class="float-right text-muted text-sm">2 days</span>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item dropdown-footer">See All Notifications</a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-widget="fullscreen" href="#" role="button">
                            <i class="fas fa-expand-arrows-alt"></i>
                        </a>
                    </li>
                    -->

                    <li class="nav-item dropdown">
                        <a class="nav-link" data-toggle="dropdown" href="#" aria-expanded="true">
                            <i class="fas fa-filter"></i>
                        </a>
                        <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right " >
                            
                             
                            <a  class="dropdown-item" >
                                <p style="float: right;">من  : </p>
                                <input type="date" id="from_date" name="from_date">
                            </a>

                        <a  class="dropdown-item" >
                            <p style="float:right;">الي   : </p>
                            <input type="date" id="to_date" name="to_date">
                        </a>
                        
                       
                        <a  class="dropdown-item" >
                            <button class="btn btn-info" id="invoices_clk"  >بحث</button>
                        </a>

                        <a  class="dropdown-item" >
                            
                            <label></label><p style="float:right;">الفرع   : </p></label><br>
                            <input list="all" id="branch" name="branch">
                            <datalist id="all">
                                {% for br in all_branches  %}

                                <option value="{{br.name}}">
                                  
                                {% endfor %}
                            </datalist>    
                            </input>
                        </a>

                        <a href="#" class="dropdown-item" >
                            <button class="btn btn-info" id="branch_click"  >بحث</button>
                        </a>
                            
                        </div>

                        
                    </li>

                    <!--chat item-->
                    <li class="nav-item dropdown">
                        <a class="nav-link" data-toggle="dropdown" href="#" aria-expanded="true">
                        <i class="far fa-comments"></i>
                        </a>
                        <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right " style="left: inherit; right: 0px;" id="users_nav">

                                {% for user in off %}
                                <a href="{% url 'Chat:chat' request.user.id  user.id %}" data-toggle='modal' data-target="#sub_modal"  class="dropdown-item">
                                    <!-- Message Start -->
                                    
                                    <div class="media">
                                    
                                        <img src="{% static 'AdminLTE/dist/img/user1-128x128.jpg' %}" alt="User Avatar" class="img-size-50 mr-3 img-circle">
                                        <div class="media-body">
                                            
                                            {% if user.user.get_full_name %}    
                                            <h3 class="dropdown-item-title">{{user.user.get_full_name}}</h3>
                                            {% else %}
                                            <h3 class="dropdown-item-title">{{user.user.username}}</h3>
                                            {% endif %}
                                            <span class="users-list-date" ><i class="fa fa-clock"></i>{{user.last_activity|timesince}}</span>
                                        
                                    </div>
                                
                                    </div>
                                    <!-- Message End -->
                                    
                                </a>
                                {% endfor %}

                                {% for user in on %}
                                <a href="{% url 'Chat:chat' request.user.id  user.id %}" data-toggle='modal' data-target="#sub_modal"  class="dropdown-item">
                                    <!-- Message Start -->
                                    
                                    <div class="media">
                                    
                                        <img src="{% static 'AdminLTE/dist/img/user1-128x128.jpg' %}" alt="User Avatar" class="img-size-50 mr-3 img-circle">
                                        <div class="media-body">
                                            
                                            {% if user.user.get_full_name %}    
                                            <h3 class="dropdown-item-title">{{user.user.get_full_name}}</h3>
                                            {% else %}
                                            <h3 class="dropdown-item-title">{{user.user.username}}</h3>
                                            {% endif %}
                                        
                                        <div class="badge badge-success">Online</div>
                                    </div>
                                
                                    </div>
                                    <!-- Message End -->
                                    
                                </a>
                                {% endfor %}

                                <div class="dropdown-divider"></div>

                                <a href="#" class="dropdown-item dropdown-footer"></a>
                    </div>
                    </li>

                 


                    <li class="nav-item">
                        <a class="nav-link" data-widget="control-sidebar" data-slide="true" href="#" role="button">
                            <i class="fas fa-th-large"></i>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'Auth:logout' %}" role="button">
                            <i class="fas fa-power-off"></i>
                        </a>
                    </li>
                </ul>
            {% endblock %}
       
        </nav>



        <!-- /.navbar -->

        <!-- Main Sidebar Container -->
        {% block navbar %}
        {% include 'segments/navbar.html' %}
        {% endblock %}

        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper">


            <!-- Main content -->
            <section class="content">
                <div class="container-fluid">
                    <div class="row">

                        {% block body %}

                        {% endblock %}
                    </div>
                </div><!-- /.container-fluid -->
            </section>
            <!-- /.content -->
        </div>
        <!-- /.content-wrapper -->
        <footer class="main-footer dont-print">

            <strong>
                جميع الحقوق محفوظة &copy; 2008-2020
                <a href="https://onlink4it.com" target="_blank">
                    شركة اون لينك
                </a>
                .
            </strong>
            <div class="float-right d-none d-sm-inline-block">
                <b>الاصدار</b>
                <a href="{% url 'Core:ChangeLog' %}" data-toggle="modal" data-target="#sub_modal" class="fixed-link">
                    1.2.3
                </a>
                -
            </div>
        </footer>

        <!-- Control Sidebar -->
        <aside class="control-sidebar control-sidebar-dark">
            <!-- Control sidebar content goes here -->
        </aside>
        <!-- /.control-sidebar -->
    </div>
    <!-- ./wrapper -->


    <!-- HotKey Functions-->
    <script>
/*
        window.addEventListener("keypress", checkKeyPress, false);

        function checkKeyPress(e) {
            if (e.keyCode == "65") {
                window.location.replace("{% url 'Core:index' %}"); // Home Page // shift + a
            }
            else if (e.keyCode == "83") {
                window.location.replace("{% url 'Invoices:show_opened_invoices' 1 %}"); // فاتورة مبيعات الرئيسية : shift + s //
            }
            else if (e.keyCode == "68") {
                window.location.replace("{% url 'Invoices:get_last_invoice' 1 %}"); // فاتورة مبيعات عرض: shift + d // 
            }
            else if (e.keyCode == "70") {
                window.location.replace("{% url 'Invoices:make_invoice' 1 %}"); // فاتورة مبيعات جديد : shift + f // 
            }
            else if (e.keyCode == "71") {
                window.location.replace("{% url 'Invoices:show_opened_invoices' 5 %}"); // فاتورة مشتريات رئيسية: shift + g // 
            }
            else if (e.keyCode == "72") {
                window.location.replace("{% url 'Invoices:get_last_invoice' 5 %}"); // فاتورة مشتريات عرض: shift + h // 
            }
            else if (e.keyCode == "74") {
                window.location.replace("{% url 'Invoices:make_invoice' 5 %}"); // فاتورة مشتريات جديد: shift + j // 
            }
            else if (e.keyCode == "75") {
                window.location.replace("{% url 'Invoices:show_opened_invoices' 4 %}"); // فاتورة مرتجع مبيعات رئيسية: shift + k // 
            }
            else if (e.keyCode == "76") {
                window.location.replace("{% url 'Invoices:make_invoice' 4 %}"); // فاتورة مرتجع مبيعات جديد: shift + l // 
            }
            else if (e.keyCode == "80") {
                window.location.replace("{% url 'Invoices:get_last_invoice' 4 %}"); // فاتورة مرتجع مبيعات عرض: shift + p // 
            }
            else if (e.keyCode == "79") {
                window.location.replace("{% url 'Invoices:show_opened_invoices' 6 %}"); // فاتورة مرتجع مشتريات رئيسية: shift + o // 
            }
            else if (e.keyCode == "73") {
                window.location.replace("{% url 'Invoices:make_invoice' 6 %}"); // فاتورة مرتجع مشتريات جديد: shift + i // 
            }
            else if (e.keyCode == "85") {
                window.location.replace("{% url 'Invoices:show_opened_invoices' 4 %}"); // فاتورة مرتجع مشتريات عرض: shift + u // 
            }
            else if (e.keyCode == "89") {
                window.location.replace("{% url 'Invoices:show_opened_invoices' 7 %}"); // الاسعار الرئيسية : shift + y // 
            }
            else if (e.keyCode == "84") {
                window.location.replace("{% url 'Invoices:make_invoice' 7 %}"); //الاسعار جديد : shift + t // 
            }
            else if (e.keyCode == "82") {
                window.location.replace("{% url 'Invoices:get_last_invoice' 7 %}"); //  الاسعار عرض : shift + r// 
            }
            else if (e.keyCode == "69") {
                window.location.replace("{% url 'Invoices:show_opened_invoices' 17 %}"); // تحويل المخزن الرئيسية : shift + e// 
            }
            else if (e.keyCode == "87") {
                window.location.replace("{% url 'Invoices:get_last_invoice' 17 %}"); // تحويل المحزن عرض : shift + w // 
            }
            else if (e.keyCode == "81 ") {
                window.location.replace("{% url 'Invoices:make_invoice' 17 %}"); // تحويل المخزن جديد : shift + q // 
            }
            else if (e.keyCode == "90") {
                window.location.replace("{% url 'Invoices:show_opened_invoices' 19 %}"); // تحويل النقدية الرئيسية : shift + z // 
            }
            else if (e.keyCode == "88") {
                window.location.replace("{% url 'Invoices:treasury_transfer' %}"); // تحويل النقدية جديد : shift + x // 
            }
            else if (e.keyCode == "67") {
                window.location.replace("{% url 'Invoices:get_last_invoice' 19 %}"); // تحويل النقدية عرض: shift + c // 
            }
            else if (e.keyCode == "86") {
                window.location.replace("{% url 'Invoices:show_opened_invoices' 11 %}"); // اذن صرف النقدية الرئيسية: shift + v // 
            }
            else if (e.keyCode == "66") {
                window.location.replace("{% url 'Invoices:get_last_invoice' 11 %}"); // اذن صرف النقدية عرض: shift + b // 
            }
            else if (e.keyCode == "78") {
                window.location.replace("{% url 'Invoices:expense_invoice' %}"); // اذن صرف النقدية جديد: shift + n // 
            }
            else if (e.keyCode == "77") {
                window.location.replace("{% url 'Invoices:show_opened_invoices' 12 %} "); // اذن قبض النقدية الرئيسية: shift + m // 
            }
            else if (e.keyCode == "44") {
                window.location.replace("{% url 'Invoices:income_invoice' %} "); // اذن قبض النقدية جديد: , // 
            }
            else if (e.keyCode == "47") {
                window.location.replace("{% url 'Invoices:get_last_invoice' 12 %} "); // اذن قبض النقدية عرض: / // 
            }
            else if (e.keyCode == "97") {
                window.location.replace("{% url 'Customers:CustomerList' %} "); //  العملاء والموردين عرض  : a // 
            }
            else if (e.keyCode == "100") {
                window.location.replace("{% url 'Customers:CustomerTrashList' %}"); // العملاء والموردين سلة المهملات : d // 
            }
            else if (e.keyCode == "102") {
                window.location.replace("{% url 'Customers:CategoryList' %}"); // الشرائح عرض: f // 
            }
            else if (e.keyCode == "103") {
                window.location.replace("{% url 'Customers:CategoryCreate' %}"); // الشرائح اضافة:  g // 
            }
            else if (e.keyCode == "104") {
                window.location.replace("{% url 'Customers:CategoryTrashList' %}"); // الشرائح سلة المهملات:  h // 
            }
            else if (e.keyCode == "106") {
                window.location.replace("{% url 'Customers:CustomerTypeList' %} "); // انواع العملاء عرض:  j // 
            }
            else if (e.keyCode == "107") {
                window.location.replace("{% url 'Customers:CustomerTypeCreate' %}"); // انواع العملاء جديد:  k // 
            }
            else if (e.keyCode == "108") {
                window.location.replace("{% url 'Customers:CustomerTypeCreate' %}"); // انواع العملاء سلة المهملات:  l // 
            }





















        }
*/

    </script>


    <!-- jQuery -->
    <script src="{% static 'AdminLTE/plugins/jquery/jquery.min.js' %}"></script>
    <!-- jQuery UI 1.11.4 -->
    <script src="{% static 'AdminLTE/plugins/jquery-ui/jquery-ui.min.js' %}"></script>
    <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
    <script>
        $.widget.bridge('uibutton', $.ui.button)
    </script>
    <!-- Bootstrap 4 -->
    <script src="{% static 'AdminLTE/plugins/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
    <!-- ChartJS -->
    <script src="{% static 'AdminLTE/plugins/chart.js/Chart.min.js' %}"></script>

    
    <!-- Sparkline -->
    <script src="{% static 'AdminLTE/plugins/sparklines/sparkline.js' %}"></script>
    <!-- JQVMap -->
    <script src="{% static 'AdminLTE/plugins/jqvmap/jquery.vmap.min.js' %}"></script>
    <script src="{% static 'AdminLTE/plugins/jqvmap/maps/jquery.vmap.usa.js' %}"></script>
    <!-- jQuery Knob Chart -->
    <script src="{% static 'AdminLTE/plugins/jquery-knob/jquery.knob.min.js' %}"></script>
    <!-- daterangepicker -->
    <script src="{% static 'AdminLTE/plugins/moment/moment.min.js' %}"></script>
    <script src="{% static 'AdminLTE/plugins/daterangepicker/daterangepicker.js' %}"></script>
    <!-- Tempusdominus Bootstrap 4 -->
    <script
        src="{% static 'AdminLTE/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js' %}"></script>
    <script src="https://cdn.rtlcss.com/bootstrap/v4.2.1/js/bootstrap.min.js"
        integrity="sha384-a9xOd0rz8w0J8zqj1qJic7GPFfyMfoiuDjC9rqXlVOcGO/dmRqzMn34gZYDTel8k"
        crossorigin="anonymous"></script>
    <!-- Summernote -->
    <script src="{% static 'AdminLTE/plugins/summernote/summernote-bs4.min.js' %}"></script>
    <!-- overlayScrollbars -->
    <script src="{% static 'AdminLTE/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js' %}"></script>
    <!-- AdminLTE App -->
    <script src="{% static 'AdminLTE/dist/js/adminlte.js' %}"></script>
    <!-- AdminLTE for demo purposes -->
    <script src="{% static 'AdminLTE/dist/js/demo.js' %}"></script>
    <!-- AdminLTE dashboard demo (This is only for demo purposes) -->
    <script src="{% static 'AdminLTE/dist/js/pages/dashboard.js' %}"></script>
    <!-- Select2 -->
    <script src="{% static 'AdminLTE/plugins/select2/js/select2.full.js' %}"></script>

  
    

    <script>
        $('#action_modal').on('show.bs.modal', function (e) {
            $('#action_modal').load(e.relatedTarget.href);
        });

        $('#sub_modal').on('show.bs.modal', function (x) {
            $('#sub_body').load(x.relatedTarget.href);
        });

        $('body').on('hidden.bs.modal', function () {
            if ($('.modal.in').length > 0) {
                $('body').addClass('modal-open');
            }
        });
    </script>

    <!--Chart Config-->
    <script>
        var ctx = document.getElementById('myChart').getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['January ', 'February', 'Yellow', 'March', 'April', 'May' ,'June','July','August'],
                datasets: [{
                    label: 'نسبة المبيعات',
                    data: [12, 19, 3, 5, 18, 3 ,6,18,10,12,12,18],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(255, 206, 86, 0.2)',
                        'rgba(75, 192, 192, 0.2)',
                        'rgba(153, 102, 255, 0.2)',
                        'rgba(255, 159, 64, 0.2)'
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)',
                        'rgba(255, 159, 64, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
     </script>


     <!--Ajax2 request every 1 min update user last seen-->
<script>
    setInterval(function() {
        $( document ).ready( function() {
            $( '#users_nav' ).html( '&nbsp;' ).load( "{% url 'Chat:users_nav' %}");
        });
  }, 60000); 
</script>

    


    <script src="{% static 'js/ONERP.js' %}"></script>

    
    {% block js %}

    {% endblock %}
</body>

</html>